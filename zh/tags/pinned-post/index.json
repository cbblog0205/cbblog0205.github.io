[{"content":"前言 依靠Docker这样强大的容器化技术，人们可以将应用/程序+依赖环境整合打包到一个Docker“容器”里。大部分情况下，无需安装额外的程序、依赖，只需在系统上安装好了Docker的运行环境，并使用别人打包好的镜像/容器，就可以直接运行其中的应用或者程序了。\nNANOGrav提供了一个官方的nanograv/nanopulse镜像，里面已经安装了很多研究领域必备的程序，比如Tempo2、PSRCHIVE、PRESTO等，通过使用此镜像，就可以直接运行这些程序了，省了很多安装的麻烦。\n参考：\nDocker 教程 | 菜鸟教程 (runoob.com)\nDocker Docs: How to build, share, and run applications\nStep 1：安装Docker 在完全没安装过Docker的Linux系统上安装Docker环境，比较简便的方法是使用Docker官方提供的安装脚本。下载好后，直接用bash运行脚本。\n下载 get-docker.sh\ncurl -fsSL https://get.docker.com -o get-docker.sh 运行 get-docker.sh\nsudo sh get-docker.sh 参考：Install Docker Engine on Ubuntu\nStep 2：以普通用户（非root）操作Docker 默认情况下，需要root的权限才可以操作Docker的image、container。而我们平时安装使用的Linux系统，日常使用的多半是普通用户，不是root。这样的话每次运行docker命令，都要在命令前面加上sudo，有点麻烦。所以，为了能够以普通用户（非root）的权限操作Docker，需要额外地做些配置。\n创建docker用户组（也有可能安装Docker时，这个用户组就已经创建了，比如在Ubuntu上运行上面那个安装脚本）\nsudo groupadd docker 将当前用户添加到docker用户组\nsudo usermod -aG docker $USER 好了，现在下载并运行一个官方的体积非常小的hello-world容器，测试下是否一切都设置好了\ndocker run hello-world 如果看到类似下图的输出，那就OK了。有可能退出并重开终端，sudo usermod -aG docker $USER也不会马上生效，可以试试重启下系统。\n参考：Linux post-installation steps for Docker Engine\nStep 3：下载nanograv/nanopulse镜像 然后，我们可以通过docker pull命令下载Docker Hub上的nanograv/nanopulse镜像：\ndocker pull nanograv/nanopulse 现在，Docker就开始“一层一层”地下载此镜像了。注意，这个docker镜像的体积很大，大概8~9G，下载可能会花很长时间。\n下载好后，输入docker image ls，看看docker的镜像列表里是否已包含nanograv/nanopulse。\n参考：nanograv/nanopulse - Docker Image | Docker Hub\nStep 4：开启xhost控制 执行以下命令，开放X服务器权限，让Docker的容器可以访问X服务器的显示接口：\nxhost + 这样，在容器中运行Tempo2、PSRCHIVE这些需要图形界面输出的程序时，图形界面可以正常输出到宿主机。\n参考：Docker容器图形化界面显示 - 知乎 (zhihu.com)\nStep 5：启动nanograv/nanopulse容器 有了image/镜像，我们就可以基于此镜像，启动一个container/容器了。在终端输入类似如下的命令：\ndocker run -d -v /path/of/host:/path/of/container -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=unix$DISPLAY -e GDK_SCALE -e GDK_DPI_SCALE -p 8888:8888 -p 2222:22 --name nanopulse nanograv/nanopulse 说明一下：这里，-v /path/of/host:/path/of/container表示将宿主机（也就是运行着Docker的Linux系统）的目录/path/of/host挂载到容器中的目录/path/of/container。比如，将/path/of/host改为/home/folder，将/path/of/container改为/home/jovyan/work（对于nanograv/nanopulse，建议挂载到这个目录），那么在宿主机的目录/home/folder操作文件，就相当于是在容器中的/home/jovyan/work中操作文件了。\nStep 6：进入container，并使用Tempo2 现在，先复制待会测试Tempo2要用的t1.par，t1.tim（脉冲星计时得到的数据文件）到宿主机的目录/path/of/host（也就是在前面命令中写入的目录）。\n此时，这个container已经在后台跑起来了，运行以下命令，进入这个container的bash后台\ndocker exec -it nanopulse /bin/bash 接着，在container的bash，cd到/home/jovyan/work这个目录（因为我选择挂载到的是这个目录）。输入ls，会看到此目录下已经有t1.par，t1.tim两个文件了。\n现在看看tempo2等程序是不是可以正常运行了。输入：\ntempo2 -gr plk -f t1.par t1.tim 稍等一会，可以看到Tempo2正常运行，图形化界面也正常出来了。\n后记 其实这个container跑起来后，也可以用SSH连接的。\n教程应该还有些不太正确的地方，以后再改正啦~\n","description":" ","id":0,"section":"posts","tags":["tech","pulsar"],"title":"使用Docker镜像nanopulse，运行Tempo2、PSRCHIVE等程序","uri":"https://cbblog0205.github.io/zh/posts/%E4%BD%BF%E7%94%A8docker%E9%95%9C%E5%83%8Fnanopulse%E8%BF%90%E8%A1%8Ctempo2psrchive%E7%AD%89%E7%A8%8B%E5%BA%8F/"},{"content":" 摘自《心经(蔡志忠漫画中英文版)》\n 当初，有位善于观察自我的修行者，依智慧到彼岸的方法进入深层思考。他发现：“众生以自我立场，评断现前情境的好坏顺逆，心生爱憎分别，痛苦烦恼便因而产生了！”\n佛陀对舍利子说：舍利子啊！宇宙中凡是存在必然变化，凡是不变化必然不存在，我们的心也是如此。\n舍利子啊！情境只是一时变化，没有好、坏、顺、逆、净、垢、增、减。我们的心要像镜子一样反映当下，不要想它怎么来、怎么去，不要以自我立场去分析眼前情境，也没有所要分析的对象，没有主观想法。眼前情境没有顺逆，内心也没有爱憎分别。\n如果能达到这种境界，苦无从产生，也没有苦需要消除。身心与当下合一，无所欠缺，也无所得。\n虽然无所得，但修行者依智慧到彼岸的方法，悟通生命实相。他的心没有挂碍、无有恐惧、远离颠倒梦想，豁然顿悟。\n过去、现在、未来的开悟者们，都依智慧到彼岸的方法，达到最高觉悟。因此我们知道，智慧到彼岸的修行方法是大神咒，是大明咒，是无上咒，是无等等咒，能除一切苦，是真实不虚的。\n智能彼岸的境界，美妙得无法用语言描述，我来歌颂唱咏：去啊，去啊！去彼岸啊！大家都去彼岸，迅速完成开悟多美妙啊！\n","description":"蔡志忠老师翻译的《般若波罗蜜多心经》","id":1,"section":"posts","tags":[""],"title":"[转载]《心经》白话文翻译版","uri":"https://cbblog0205.github.io/zh/posts/%E5%BF%83%E7%BB%8F%E7%99%BD%E8%AF%9D%E6%96%87%E7%BF%BB%E8%AF%91%E7%89%88/"},{"content":"前言 什么是Windows To Go？\nWindows To Go/WTG，可以理解为随身携带的Windows系统，就是把一个完整的Windows系统装入移动设备（U盘或移动硬盘等），将此设备插入任意一台主机，就可以启动移动设备里的Windows（当然前提是这台主机的硬件是Windows支持的）。最新的Windows对此功能支持得较好，所以最好使用Windows 10/11 系统镜像来制作Windows To Go。\n什么是VHD/VHDX？\nVHD是微软的一种虚拟磁盘格式（Virtual Hard Disk format），简单说VHD就是一个文件，通过在磁盘管理中附加和挂载此文件，这个文件就可以像真的硬盘一样使用了。在那个挂载的“虚拟硬盘”中读写文件，其实都是对VHD文件的读写。VHDX是这种虚拟磁盘格式更新的版本，性能可能更好一点。对于这里制作Windows To Go，VHD和VHDX基本没太多区别的。\n什么是Ventoy？\nVentoy简直就是一款安装和维护操作系统的神器软件！简单来说，Ventoy是一个制作可启动U盘的开源工具。有了Ventoy你就无需反复地格式化U盘，你只需要把 ISO/WIM/IMG/VHD(x)/EFI 等类型的文件直接拷贝到U盘里面就可以启动了，copy \u0026amp; paste，就那么简单。\n传统的Windows To Go制作方法，比如Windows 10系统自带的Windows To Go制作工具（企业版和教育版才有）、Rufus的WTG制作选项、WTG辅助工具，都是要把Windows安装到整个U盘。这个U盘只能用来启动里面的Windows，想再用它启动点别的什么东西是做不到的。而由于Ventoy对VHD(X)的启动支持，现在完全可以将完整的Windows系统装入一个VHD(X)文件中，然后拷贝到U盘里，就可以启动了。这意味着一个U盘可以同时放多个装了Windows的VHD(X)；想这个U盘还能启动一个WinPE？也没问题，可以将某个WinPE（微PE、FirPE、优启通。。。）制作成可启动的iso文件，并拷贝到U盘里即可。同样，其他的iso、wim、img通通都可以拷贝到U盘里，互相不干扰，实现一盘多用。\n下面演示在Windows 10系统下的制作步骤，使用的Windows安装镜像是Win10_21H2(x64)。\nWindows To Go 制作步骤： Step 1：创建VHD(X)文件 在Windows桌面的开始按钮，右键点击出来一个菜单，点击磁盘管理；\n选择操作——创建VHD；\n在位置那里选择VHD(X)的命名和存放位置，选择虚拟磁盘格式为VHD或VHDX，选择“固定大小”或“动态扩展”（相比“固定大小”，“动态扩展”的VHD(X)可以随使用的容量而逐步增大，一直到最大的容量。通常“固定大小”的VHD(X)会启动得快一点）。虚拟硬盘大小那设置VHD(X)的大小，推荐40GB以上，一般装完Win10就占去大概20多GB了。\n点确定，等待VHD(X)创建完了之后，通常磁盘管理就自动附加此VHD(X)了。现在要初始化和格式化此VHD(X)。\n在已附加的虚拟硬盘右键初始化磁盘，推荐选择GPT分区格式即可：\n初始化后在未分配的区域右键新建简单卷（我这里把所有未分配的区域都分配建立一个卷，也就是一个分区）：\n按照向导的提示新建分区，注意文件系统需要选择NTFS，其他的选择默认即可：\n格式化之后，磁盘管理就自动挂载此VHD(X)中的卷/分区了，在资源管理器中如下图所示：\n我这里的分区分配的盘符为I。\nStep 2：将Windows系统注入VHD(X) 为了安装Windows 10，自然需要一个Windows 10的安装镜像。可以从微软官网或什么MSDN, itellyou.cn下载，这里不赘述了。\n下载后用Windows的文件资源管理器打开此镜像，相当于挂载了一个虚拟的光驱，并自动分配一个盘符，比如我这里用是Win10_21H2(x64)的iso，打开后盘符是J：\n接下来就需要用Dism命令来注入镜像。Dism是功能很全的工具，但我们这里基本只用两条命令就可以了。\n因为一个Windows 10的安装镜像往往是包含多个版本的，比如家庭版，教育版，专业版等等，直接安装注入的话，很可能就不知安的是哪个版本了。所以我们要先查询下这个镜像里每个版本对应的索引/Index。使用管理员权限打开cmd/命令提示符。在cmd窗口中，输入类似如下的命令并回车。\nDism /Get-ImageInfo /ImageFile:J:\\sources\\install.wim 如下图所示：\n这里，/Get-ImageInfo是Dism命令的一个选项，类似Linux命令的选项/option，表示查询镜像信息；/ImageFile同样是一个选项，表示要使用的镜像，这个选项的冒号后面要提供镜像所在的路径和名称（对于安装Windows 10，通常就是sources目录下的install.wim），比如我这里写的就是J:\\sources\\install.wim。\n得到各个版本对应的索引/Index后，现在可以继续用Dism注入Windows系统了，也就是在cmd窗口中，输入类似如下的命令并回车。\nDism /Apply-Image /ImageFile:J:\\sources\\install.wim /index:4 /ApplyDir:I:\\ 如下图所示：\n这里，/Apply-Image也是Dism命令的一个选项，表示要应用某个镜像；/ImageFile前面说过了，冒号后面要提供镜像所在的路径和名称；/index表示要应用镜像中的哪个版本，冒号后面要提供对应的索引序号，我这里就选比较常用的专业版，所以就填4；/ApplyDir表示安装到哪个分区，之前那个虚拟硬盘里的分区已挂载，我这里的盘符为I，所以冒号后面写入I:\\。\n等待注入完成，接着回到磁盘管理，把VHD(X)分离，也就是不再附加和挂载此VHD(X)。操作如下：\nStep 3：将Ventoy安装进U盘/移动设备，并将镜像分区格式化成NTFS 这一步很简单，照着Ventoy官网的说明做就完了。\n安装Ventoy 插上U盘（或别的什么移动设备），下载最新版的ventoy程序包，直接执行 Ventoy2Disk.exe，选择移动设备，然后点击 安装 按钮就可以了。\n 注意，安装Ventoy会将整个盘都格式化，里面的数据都会丢失！\n 将镜像分区格式化成NTFS 安装完成之后，U盘/移动设备会被分成两个分区。\n其中第1个分区（就是容量大的那个分区，也可以称之为镜像分区，通常分区名就叫Ventoy）将会被格式化为exFAT文件系统。\n只需把要启动的ISO、WIM、VHD等文件拷贝到这里面即可。放在任意目录以及子目录下都行，Ventoy默认会遍历所有的目录和子目录，找出所有的镜像文件。\n这个镜像分区可以重新格式化成其他支持的文件系统，比如NTFS/FAT32/UDF/XFS/Ext2/3/4等，不影响Ventoy的使用。但是！为了启动VHD(X)里的Window，这个分区必须被格式化成NTFS文件系统！ 原因大概是微软限制了现在的Windows系统（7、8、10）只能在NTFS或ReFS分区中挂载虚拟磁盘。\n 据说Windows 10 v1809 及以后版本的系统，理论上VHD(X)文件也可以存放在exfat分区中。这篇文章里就有介绍：发现Win10 v1903(19H1)居然支持exFAT+VHD(X)模式启动了 - VHD系统区 - 无忧启动论坛 - Powered by Discuz! (wuyou.net)\n其实我也试过了，把VHD(X)放到exfat分区，并启动里面的Windows 10。怎么说呢，整个过程更加麻烦，VHD(X)里面的分区都要格式化成exfat分区。虽然是可以启动，但是总觉得系统工作得不是很正常，Edge浏览器时不时就闪退。还有，Microsoft应用商店里的应用全都用不了，像Microsoft应用商店本身、OneNote、To Do、Groove 音乐等等。所以为了正常使用Windows To Go，最好还是格式化成NTFS吧。\n 格式化方法就是在Windows的文件资源管理器中选中那个镜像分区，选择“格式化”，选择“文件系统”为NTFS。比较简单，这里也不赘述了。\n拷贝ventoy_vhdboot.img 文件到ventoy 目录 Ventoy使用此插件来支持直接启动VHD(X)文件。\n从此链接ventoy/vhdiso下载 ventoy_vhdboot.img 文件，放置在镜像分区（就是放ISO、WIM、VHD(X)等文件那个分区）的ventoy 目录下（默认没有这个目录，需手动创建，注意大小写），即 /ventoy/ventoy_vhdboot.img 就可以了。\n注意，启动Win7和Win10是要用不同的ventoy_vhdboot.img 文件的，参考：Plugin.WinVhdBoot . Ventoy\nStep 4：拷贝VHD(X)到移动设备 就是拷贝VHD(X)文件到那个镜像分区，copy \u0026amp; paste。\nStep 5：开机启动到Ventoy并选择启动VHD(X) 好现在一切就绪，把U盘/移动设备拔出，插到哪台主机上，开机，按F1或F2或Esc键或别的什么键（具体哪个键可以百度下“这台主机的品牌+bios”）启动到主机的BIOS，设置Boot order之类的，使得安装了Ventoy的那个设备是第一个被启动的。或者BIOS支持的话，开机时直接选择Ventoy的移动设备为启动设备。Ventoy是同时支持Legacy BIOS和UEFI的。\n接着应该就进入了Ventoy的界面，大概像这样：\n然后选择那个VHD(X)启动，就可以启动Windows To Go了。\nAdditional 1：OOBE阶段出错 我发现如果用原版的Windows 10安装镜像，照上面那样安装，有一定概率会在第一次启动Window时，也就是Windows进行一些基本设置/初始化的时候（或经常说的OOBE阶段——Out-Of-Box Experience），跳出一些像这样的错误：windows安装程序无法将windows配置为在此计算机的硬件上运行；Windows无法完成安装。若要在此计算机上安装Windows,请重新启动安装。。这个问题也是有点棘手，大概就是OOBE阶段没法很好识别VHD(X)。没办法，人家微软本来就没考虑过有人要把Windows直接安到VHD里。。。我找到的一些解决方法都是设法跳过OOBE阶段，这篇贴子也提到了这个问题：使用Ventoy启动Windows To Go - Windows To Go优盘系统 - 萝卜头IT论坛 - Powered by Discuz! (luobotou.org) 。可行是勉强可行，但是我总觉得这种直接修改注册表的方法还是有点风险。。。。。。\n我建议的一个方法是，在Step 2中，改为把一个安装并完成了OOBE阶段的Windows注入VHD（或者先安装Windows到一个真实的硬盘分区，或者借助VirtualBox这样的虚拟机安装）。是的，听起来操作是更多更复杂了😢，看以后有没有机会我再补写这部分吧。。。。。。\nAdditional 2：启动本地硬盘的VHD(X) 如果不想把VHD(X)拷贝到U盘，而是放在本地主机的硬盘，直接启动本地硬盘的VHD(X)，也是可以的，参考## 浏览启动本地硬盘中的文件。基本上就是在Ventoy界面上按 F2 ，就可以直接浏览并启动本地硬盘中的镜像文件。\n","description":"口袋里的Windows","id":2,"section":"posts","tags":["tech",""],"title":"Windows 10+VHD(X)+Ventoy：也许是更好的Windows To Go制作方法","uri":"https://cbblog0205.github.io/zh/posts/windows-10+vhdx+ventoy%E4%B9%9F%E8%AE%B8%E6%98%AF%E6%9B%B4%E5%A5%BD%E7%9A%84windows-to-go%E5%88%B6%E4%BD%9C%E6%96%B9%E6%B3%95/"},{"content":"关于我 联系方式（可能不能及时回复）：\n请到这个仓库https://github.com/cbblog0205/cbblog0205.github.io的issues留言\n关于这个博客 本站是由Hugo生成的静态站点，所使用的主题是hugo-theme-zzo，托管在GitHub pages（因为弄一个自定义的域名还要购买、注册、备案，好麻烦，暂时不考虑吧）。\n搭建这个博客参考很多教程，包括这个B站的视频手把手教你从0开始搭建自己的个人博客 |第二种姿势。这个hugo-theme-zzo主题算是我比较喜欢的一款，喜欢这种简约和卡通的风格，而且还可以设置多语言页面。\n","description":"About Page","id":3,"section":"","tags":null,"title":"关于我和这个博客","uri":"https://cbblog0205.github.io/zh/about/"},{"content":"因需要重新整理代码和文章，此博客暂停更新。\n","description":" ","id":4,"section":"posts","tags":["pinned-post"],"title":"此博客暂停更新","uri":"https://cbblog0205.github.io/zh/posts/post113401/"},{"content":"Moments\n","description":"Moments","id":6,"section":"gallery","tags":null,"title":"相册","uri":"https://cbblog0205.github.io/zh/gallery/photo/"}]